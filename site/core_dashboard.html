<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>RamIA Core Dashboard</title>
  <link rel="stylesheet" href="./core_dashboard.css"/>
</head>
<body>
  <header class="topbar">
    <div>
      <h1>RamIA Core Dashboard</h1>
      <p class="muted">Guided mode for first runs, Advanced mode for power users.</p>
    </div>
    <div class="mode-toggle" role="tablist" aria-label="Mode">
      <button id="mode-guided" class="is-active" data-mode="guided" role="tab" aria-selected="true">Guided</button>
      <button id="mode-advanced" data-mode="advanced" role="tab" aria-selected="false">Advanced</button>
    </div>
  </header>

  <main class="container">
    <section id="guided-panel" class="panel">
      <h2>6-step guided setup</h2>
      <p class="muted">Each step includes what it is, what to do next, and what to do if it fails.</p>

      <div class="step-grid">
        <article class="step-card" data-step="1">
          <h3>Step 1: Check node status</h3>
          <p><strong>What is this?</strong> Verifies your node is reachable and reports chain health.</p>
          <p><strong>What do I do next?</strong> Click <em>Check status</em>, then continue once <code>ok: true</code> appears.</p>
          <p><strong>What happens if it fails?</strong> The backend may be offline; start your core process and retry.</p>
          <button class="primary" data-action="status">Check status</button>
        </article>

        <article class="step-card" data-step="2">
          <h3>Step 2: Create or inspect wallet</h3>
          <p><strong>What is this?</strong> Wallet creation initializes your local address and key material.</p>
          <p><strong>What do I do next?</strong> Click <em>Create wallet</em>, then <em>Wallet info</em> to confirm your address.</p>
          <p><strong>What happens if it fails?</strong> You may have file permission/path issues or a malformed wallet file.</p>
          <div class="button-row">
            <button class="primary" data-action="walletCreate">Create wallet</button>
            <button data-action="walletInfo">Wallet info</button>
          </div>
        </article>

        <article class="step-card" data-step="3">
          <h3>Step 3: Mine a block</h3>
          <p><strong>What is this?</strong> Mining commits current mempool transactions and advances chain height.</p>
          <p><strong>What do I do next?</strong> Click <em>Mine one block</em> and confirm the returned height increases.</p>
          <p><strong>What happens if it fails?</strong> If no template is produced, ensure the chain is initialized and healthy.</p>
          <button class="primary" data-action="mine">Mine one block</button>
        </article>

        <article class="step-card" data-step="4">
          <h3>Step 4: Send a transaction</h3>
          <p><strong>What is this?</strong> Builds a transfer from one address to another and submits to mempool.</p>
          <p><strong>What do I do next?</strong> Fill fields and click <em>Send transaction</em>.</p>
          <p><strong>What happens if it fails?</strong> Guardian policy, fee limits, or invalid addresses may reject it.</p>
          <div class="form-grid">
            <input id="guided-from" placeholder="from address"/>
            <input id="guided-to" placeholder="to address"/>
            <input id="guided-amount" type="number" value="100000" placeholder="amount"/>
            <input id="guided-fee" type="number" value="1000" placeholder="fee"/>
            <input id="guided-memo" placeholder="memo (optional)"/>
          </div>
          <button class="primary" data-action="send">Send transaction</button>
        </article>

        <article class="step-card" data-step="5">
          <h3>Step 5: Understand guardian decisions</h3>
          <p><strong>What is this?</strong> Explains why a transaction was accepted, flagged, or denied.</p>
          <p><strong>What do I do next?</strong> Paste a txid then click <em>Explain guardian decision</em>.</p>
          <p><strong>What happens if it fails?</strong> Endpoint may be unavailable; use logs/audit output for fallback diagnostics.</p>
          <div class="button-row">
            <input id="guided-txid" placeholder="txid for explanation"/>
            <button class="primary" data-action="guardianExplain">Explain guardian decision</button>
          </div>
        </article>

        <article class="step-card" data-step="6">
          <h3>Step 6: Inspect activity</h3>
          <p><strong>What is this?</strong> Shows mempool, transaction list, and latest block data for verification.</p>
          <p><strong>What do I do next?</strong> Use the three buttons below to review live chain state.</p>
          <p><strong>What happens if it fails?</strong> You can still proceed, but observability is reduced until APIs return.</p>
          <div class="button-row">
            <button data-action="mempoolList">List mempool</button>
            <button data-action="txList">List transactions</button>
            <button data-action="blocksLatest">Latest blocks</button>
          </div>
          <div class="button-row">
            <input id="guided-block-hash" placeholder="block hash for block_get"/>
            <button data-action="blockGet">Get block</button>
          </div>
        </article>
      </div>
    </section>

    <section id="advanced-panel" class="panel hidden">
      <h2>Advanced operations</h2>
      <div class="tabs" role="tablist" aria-label="Advanced Tabs">
        <button class="tab is-active" data-tab="wallet">Wallet</button>
        <button class="tab" data-tab="send">Send</button>
        <button class="tab" data-tab="mempool">Mempool</button>
        <button class="tab" data-tab="blocks">Blocks</button>
        <button class="tab" data-tab="mining">Mining</button>
        <button class="tab" data-tab="network">Network</button>
        <button class="tab" data-tab="bots">Bots</button>
        <button class="tab" data-tab="settings">Settings</button>
      </div>

      <div class="tab-panels">
        <div class="tab-panel is-active" data-panel="wallet">
          <div class="button-row">
            <button class="primary" data-action="walletCreate">Create wallet</button>
            <button data-action="walletInfo">Wallet info</button>
          </div>
        </div>
        <div class="tab-panel" data-panel="send">
          <div class="button-row"><button class="primary" data-action="send">Send using guided form values</button></div>
        </div>
        <div class="tab-panel" data-panel="mempool">
          <div class="button-row"><button data-action="mempoolList">List mempool</button></div>
        </div>
        <div class="tab-panel" data-panel="blocks">
          <div class="button-row">
            <button data-action="blocksLatest">Latest blocks</button>
            <button data-action="blockGet">Get block by hash</button>
          </div>
        </div>
        <div class="tab-panel" data-panel="mining">
          <div class="button-row"><button class="primary" data-action="mine">Mine one block</button></div>
        </div>
        <div class="tab-panel" data-panel="network">
          <div class="button-row"><button data-action="status">Node status</button></div>
        </div>
        <div class="tab-panel" data-panel="bots">
          <div class="button-row"><button data-action="guardianExplain">Guardian explain</button></div>
        </div>
        <div class="tab-panel" data-panel="settings">
          <label class="inline">
            API Base URL
            <input id="api-base" placeholder="/api" value="/api"/>
          </label>
          <button data-action="saveSettings">Save settings</button>
        </div>
      </div>
    </section>

    <section class="panel">
      <h2>Response</h2>
      <div id="status-badge" class="badge neutral">Idle</div>
      <pre id="output" class="output">Ready.</pre>
    </section>
  </main>

  <script src="./core_dashboard.js"></script>
</body>
</html>
